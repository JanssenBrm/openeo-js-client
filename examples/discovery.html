<!DOCTYPE html>
<html>
    <head>
        <title>JS Client Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="../src/OpenEO.js"></script>
        <script type="text/javascript">
			$(function () {
				OpenEO.Capabilities.get(function (data) {
					var items = [];
					$.each(data, function (key, val) {
						items.push("<li>" + val + "</li>");
					});

					$("<ul/>", {
						html: items.join("")
					}).replaceAll("#capabilities");
				});

				OpenEO.Data.get({}, function (data) {
					var items = [];
					$.each(data, function (key, val) {
						items.push("<li><strong>" + val.product_id + "</strong>: " + val.description + "</li>");
					});
					$("<ul/>", {
						html: items.join("")
					}).replaceAll("#data");
				}, function (errorCode) {
					alert("Data delivered error " + errorCode);
				});

				OpenEO.Data.getById('landsat7_ndvi', function (data) {
					var items = [];
					$.each(data, function (key, val) {
						items.push("<li><em>" + key + "</em>: " + val + "</li>");
					});
					$("<ul/>", {
						html: items.join("")
					}).replaceAll("#data_id");
				}, function (errorCode) {
					alert("Data by id delivered error " + errorCode);
				});

				OpenEO.Processes.get("ndvi", function (data) {
					var items = [];
					$.each(data, function (key, val) {
						items.push("<li><strong>" + val.process_id + "</strong>: " + val.description + "</li>");
					});
					$("<ul/>", {
						html: items.join("")
					}).replaceAll("#processes");
				}, function (errorCode) {
					alert("Processes delivered error " + errorCode);
				});

				OpenEO.Processes.getById('calculate_ndvi', function (data) {
					var items = [];
					$.each(data, function (key, val) {
						items.push("<li><em>" + key + "</em>: " + val + "</li>");
					});
					$("<ul/>", {
						html: items.join("")
					}).replaceAll("#processes_id");
				}, function (errorCode) {
					alert("Processes by id delivered error " + errorCode);
				});
			});
        </script>
    </head>
    <body>
		<h2>Capabilities</h2>
		<div id="capabilities">
			Loading data...
		</div>
		<h2>Data</h2>
		<div id="data">
			Loading data...
		</div>
		<h2>Data: Landsat NDVI</h2>
		<div id="data_id">
			Loading data...
		</div>
		<h2>Processes (containing ndvi)</h2>
		<div id="processes">
			Loading data...
		</div>
		<h2>Processes: calculate_ndvi</h2>
		<div id="processes_id">
			Loading data...
		</div>
    </body>
</html>
