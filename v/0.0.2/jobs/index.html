<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Jobs - OpenEO - Core Concepts & API</title>
  

  <link rel="shortcut icon" href="../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Jobs";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> OpenEO - Core Concepts & API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../index.html">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../glossary/index.html">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../arch/index.html">Architecture and Microservices</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Jobs</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#jobs">Jobs</a></li>
                
                    <li><a class="toctree-l4" href="#examples">Examples</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../processgraphs/index.html">Process Graphs</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../udfs/index.html">UDFs</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../views/index.html">Data Views</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../poc/index.html">Proof of Concept</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../apireference/index.html">API Reference</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">OpenEO - Core Concepts & API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
    
    <li>Jobs</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/Open-EO/openeo-api" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="jobs">Jobs</h1>
<p>As described in the <a href="../glossary/index.html">glossary</a>, a <strong>job</strong> brings one process graph to the back-end and organizes its execution, which may or may not induce costs.</p>
<p>The API distinguishes two types how jobs are (asynchronously) executed at back-ends. <em>Lazy evaluated jobs</em> runs computations on demand, i.e., with incoming requests for downloading the results. Jobs can be executed multiple times with different views (including spatial / temporal resolution and window) as provided by download requests, which could come e.g. from WCS or WMTS.  <em>Batch jobs</em> in contrast are directly submitted to the back office's processing system. They will run only once, potentially include a provided view, and will store results after execution. Batch jobs are typically time consuming such that user interaction is not possible. </p>
<p>As an example we consider the simple calculation of vegetation indexes on all available Sentinel 2 imagery over Europe. Batch evaluation will take all relevant images, compute the NDVI, and finally store the result whereas lazy evaluation will not start any computations on its own. As soon as a client performs a download request such as a <code>GetCoverage</code> WCS request, the job's process will be executed but only for requested pixels. However, back-ends are free to cache frequent intermediate results on their own.</p>
<p>There is a third way to execute jobs at the back-ends, but does not really fit into the types mentioned before. It is similar to batch jobs, but results are delivered immediately after computation, i.e. <em>synchronously executed jobs</em>. </p>
<h2 id="examples">Examples</h2>
<h3 id="lazy-evaluated-jobs">Lazy evaluated jobs</h3>
<p>Use case <a href="../poc/index.html#use-case-1">1</a> and <a href="../poc/index.html#use-case-2">2</a> are examples for <em>lazy evaluated jobs</em>.</p>
<h3 id="batch-jobs">Batch jobs</h3>
<p>Batch jobs are created by queueing <em>lazy evaluated jobs</em>. This is accomplished by calling the endpoint <code>GET /jobs/{job_id}/queue</code>. Therefore the examples of posting batch jobs are similar to lazy evaluated jobs, but are followed by additional calls to the jobs microservice. Therefore use case 1 and 2 could be converted to batch jobs by queueing them after job creation.</p>
<p>An explicit example for batch jobs is <a href="../poc/index.html#use-case-3">use case 3</a>.</p>
<h3 id="synchronously-executed-jobs">Synchronously executed jobs</h3>
<p><em>Work in progress. Examples might be changed or extended in a future version.</em></p>
<h4 id="retrieval-of-a-geotiff">Retrieval of a GeoTIFF</h4>
<p><strong>Request</strong></p>
<pre><code>Header:
POST /execute HTTP/1.1
Content-Type: application/json; charset=utf-8

Body:
{
  &quot;process_graph&quot;:{
    &quot;process_id&quot;:&quot;min_time&quot;,
    &quot;args&quot;:{
      &quot;imagery&quot;:{
        &quot;process_id&quot;:&quot;NDVI&quot;,
        &quot;args&quot;:{
          &quot;imagery&quot;:{
            &quot;process_id&quot;:&quot;filter_daterange&quot;,
            &quot;args&quot;:{
              &quot;imagery&quot;:{
                &quot;process_id&quot;:&quot;filter_bbox&quot;,
                &quot;args&quot;:{
                  &quot;imagery&quot;:{
                    &quot;product_id&quot;:&quot;S2_L2A_T32TPS_20M&quot;
                  },
                  &quot;left&quot;:652000,
                  &quot;right&quot;:672000,
                  &quot;top&quot;:5161000,
                  &quot;bottom&quot;:5181000,
                  &quot;srs&quot;:&quot;EPSG:32632&quot;
                }
              },
              &quot;from&quot;:&quot;2017-01-01&quot;,
              &quot;to&quot;:&quot;2017-01-31&quot;
            }
          },
          &quot;red&quot;:&quot;B04&quot;,
          &quot;nir&quot;:&quot;B8A&quot;
        }
      }
    }
  },
  &quot;output&quot;:{
    &quot;format&quot;:&quot;GTiff&quot;,
    &quot;tiled&quot;:true,
    &quot;compress&quot;:&quot;jpeg&quot;,
    &quot;photometric&quot;:&quot;YCBCR&quot;,
    &quot;jpeg_quality&quot;:80
  }
}
</code></pre>

<p><strong>Response</strong> </p>
<pre><code>Header:
HTTP/1.1 200 OK
Content-Type: image/tiff
Access-Control-Allow-Origin: &lt;Origin&gt;

Body:
omitted (the GeoTiff file contents)
</code></pre>

<h4 id="retrieval-of-time-series">Retrieval of time series</h4>
<p><strong>Request</strong></p>
<pre><code>Header:
POST /execute HTTP/1.1
Content-Type: application/json; charset=utf-8

Body:
{
  &quot;process_graph&quot;:{
    &quot;process_id&quot;:&quot;zonal_statistics&quot;,
    &quot;args&quot;:{
      &quot;imagery&quot;:{
        &quot;process_id&quot;:&quot;filter_daterange&quot;,
        &quot;args&quot;:{
          &quot;imagery&quot;:{
            &quot;process_id&quot;:&quot;filter_bbox&quot;,
            &quot;args&quot;:{
              &quot;imagery&quot;:{
                &quot;process_id&quot;:&quot;filter_bands&quot;,
                &quot;args&quot;:{
                  &quot;imagery&quot;:{
                    &quot;product_id&quot;:&quot;Sentinel2-L1C&quot;
                  },
                  &quot;bands&quot;:8
                }
              },
              &quot;left&quot;:16.1,
              &quot;right&quot;:16.6,
              &quot;top&quot;:48.6,
              &quot;bottom&quot;:47.2,
              &quot;srs&quot;:&quot;EPSG:4326&quot;
            }
          },
          &quot;from&quot;:&quot;2017-01-01&quot;,
          &quot;to&quot;:&quot;2017-01-31&quot;
        }
      },
      &quot;regions&quot;:&quot;/users/me/files/&quot;,
      &quot;func&quot;:&quot;avg&quot;
    }
  },
  &quot;output&quot;:{
    &quot;format&quot;:&quot;GPKG&quot;
  }
}
</code></pre>

<p><strong>Response</strong> </p>
<pre><code>Header:
HTTP/1.1 200 OK
Content-Type: application/octet-stream
Access-Control-Allow-Origin: &lt;Origin&gt;

Body:
omitted (the GeoPackage file contents)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../processgraphs/index.html" class="btn btn-neutral float-right" title="Process Graphs"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../arch/index.html" class="btn btn-neutral" title="Architecture and Microservices"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../arch/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../processgraphs/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
